

function s-syrthes-out-of-tree()
{
    echo false
}

function s-syrthes-patches()
{
    local PREFIX=$1
    local TARGET=$2
    local VARIANT=$3
    local KIND=$4
    local REF=$5

    # The following patch is to update setup
    echo syrthes_setup.ini.salome.patch
    echo syrthes/0002-correction-lecture-fichiers-med-le-type-med_int-peut.patch
    echo syrthes/0004-conversion-format-msh-4.1-ascii-vers-syrthes-lecture.patch
    echo syrthes/0005-Salome-Syrthes-module-name-changed-in-SYRTHES5GUI.patch
    echo syrthes/0006-adapt-copy-selection-from-salome.patch
    echo syrthes/0007-wip-show-dialog-option-for-SyrthesMain-default-True.patch
    echo syrthes/0008-conversion-format-msh-4.1-ASCII-vers-Syrthes.-Lectur.patch
    echo syrthes/0009-conversion-format-msh-4.1-ASCII-vers-Syrthes.-lectur.patch
    echo syrthes/0010-optionnel.patch
    echo syrthes/0011-menage.patch
}

function s-syrthes-ng-build-depends()
{
    echo s-salome-bin
}

function s-syrthes-common-build-depends()
{
    echo s-cmake
}

function s-syrthes-common-depends()
{
    echo s-cfd-study
    echo s-saturne
    echo s-scotch
}

function s-syrthes-default-depends()
{
    echo os@-metis-dev
    echo s-hdf5
    echo s-med-coupling
}

function s-syrthes-env()
{
    local PREFIX=$1
    local TARGET=$2

    set-var    CODESYRTHES_ROOT_DIR  $PREFIX
    set-var    NOM_ARCH              Linux_x86_64
    set-var    SYRTHES_ROOT          $PREFIX
    set-var    SYRTHES_HOME          $PREFIX/arch/Linux_x86_64
    set-var    SYRTHES4_HOME         $PREFIX/arch/Linux_x86_64

    add-to-var LD_LIBRARY_PATH       $PREFIX/lib
    add-to-var LD_LIBRARY_PATH       $PREFIX/extern-libraries/opt/Stardis-0.8.2-GNU-Linux64/arch/Linux_x86_64/lib
    add-to-var PATH                  $SYRTHES_HOME/bin
    add-to-var PATH                  $SYRTHES_HOME/share/syrthes
    add-to-var PYTHONPATH            $SYRTHES_ROOT/src/syrthes-gui/src/install #/SyrthesMain

}

function s-syrthes-config()
{
    local PREFIX=$1
    local TARGET=$2

    rsync -az ../src/* $PREFIX
}

function s-syrthes-install()
{
    local PREFIX=$1
    local TARGET=$2

    cd $PREFIX/src/syrthes-install
    cp -f setup.ini.salome setup.ini
    chmod a+x $PREFIX/src/syrthes-install/syrthes_install.py
    python3 syrthes_install.py    
}

function s-syrthes-post-install()
{
    local PREFIX=$1
    local TARGET=$2

    chmod a+x $PREFIX/arch/Linux_x86_64/bin/*

    # File to store PREFIX, used to be replaced at installation step:
    echo $PREFIX > $PREFIX/syrthesPrefix_dir_at_build_time.txt
}
