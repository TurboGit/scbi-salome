

#function s-syrthes-patches()
#{
#    local PREFIX=$1
#    local TARGET=$2
#    local VARIANT=$3
#    local KIND=$4
#    local REF=$5
#
#    echo module_syrthes/moduleLightSYRTHES.patch
#}

function s-syrthes-salome-module()
{
    echo SYRTHES
}

function s-syrthes-ng-build-depends()
{
    echo s-salome-bin
}

function s-syrthes-common-build-depends()
{
    echo s-cmake
}

function s-syrthes-common-depends()
{
    echo s-saturne
    echo s-code-syrthes
    echo s-salome-configuration
}

function s-syrthes-default-depends()
{
    echo s-tbb
    echo s-salome-gui
    echo s-med-coupling
}

function s-syrthes-env()
{
    local PREFIX=$1
    local TARGET=$2

    set-var     SYRTHES_ROOT_DIR    $PREFIX
    set-var     SYRTHES5_ROOT_DIR    $PREFIX
    set-var     SYRTHES5_DIR    $PREFIX

    add-to-var  LD_LIBRARY_PATH     $PREFIX/lib/salome
    add-to-var  PATH                $PREFIX/bin/salome

    add-to-var  PYTHONPATH          \
                $PREFIX/lib/python$PYTHON_VERSION/site-packages/salome
    add-to-var  PYTHONPATH          $PREFIX/lib/salome
    add-to-var  PYTHONPATH          $PREFIX/bin/salome

    add-to-var  SalomeAppConfig     $PREFIX/share/salome/resources/syrthes
    add-to-var  SALOME_MODULES      SYRTHES

    add-to-var  C_INCLUDE_PATH      $PREFIX/include
    add-to-var  CPLUS_INCLUDE_PATH  $PREFIX/include
}

function s-syrthes-build-env()
{
    local PREFIX=$1
    local TARGET=$2
    local VARIANT=$3

    set-var ROOT_SALOME $ROOT_SALOME_INSTALL
}

function s-syrthes-pre-config()
{
    local PREFIX=$1
    local TARGET=$2

    export PRE_CONFIG_DIR=$(pwd) && cd ../src && rm -rf * && git apply ${SCBI_ENV_DIR}/patches/module_syrthes/0001-SYRTHES-Resume-all-commits-from-moduleLight.patch && cd $PRE_CONFIG_DIR
    wait
}

function s-syrthes-config()
{
    local PREFIX=$1
    local TARGET=$2

    cmake  -DCMAKE_INSTALL_PREFIX=$PREFIX \
           ../src
}

function s-syrthes-build()
{
    local PREFIX=$1
    local TARGET=$2

    make -j$SCBI_JOBS
}

function s-syrthes-install()
{
    local PREFIX=$1
    local TARGET=$2

    make install
}

function s-syrthes-post-install()
{
    local PREFIX=$1
    local TARGET=$2

    cp $PREFIX/share/salome/resources/syrthes5/SalomeAppSL.xml \
       $PREFIX/share/salome/resources/syrthes5/SalomeApp.xml
}
