
function adao-vcs()
{
    echo git
    echo https://git.forge.pleiade.edf.fr/git/salome-adao
}

function adao-tar()
{
    local VERSION=$1

    echo default
    echo none
    echo none
    echo adao-$VERSION.tar.xz
}

function adao-depends()
{
    echo cmake
    echo configuration
}

function adao-env()
{
    local PREFIX=$1
    local TARGET=$2

    add-to-var PYTHONPATH $PREFIX/lib/python$PYTHON_VERSION/site-packages
}

function adao-build-env()
{
    local PREFIX=$1
    local TARGET=$2

    add-to-var CURRENT_SOFTWARE_INSTALL_DIR $PREFIX
    add-to-var SPHINX_ROOT_DIR /usr
}

function adao-out-of-tree()
{
    echo true
}

function adao-config()
{
    local PREFIX=$1
    local TARGET=$2

    # It is not possible to NOT build the documentation. When
    # ADAO_BUILD_DOC=OFF is set the installation fails trying to
    # install documentation even so we ask to not build it.
    #
    # When this is fixed we can remove from this script:
    #    add-to-var SPHINX_ROOT_DIR /usr
    #    -DPYTHON_EXECUTABLE=$(which python$PYTHON_VERSION)
    #    -DSPHINX_INTL_EXECUTABLE=/usr/bin/sphinx-build

    cmake -DCMAKE_INSTALL_PREFIX=$PREFIX -DCMAKE_BUILD_TYPE=Release \
          -DPYTHON_EXECUTABLE=$(which python$PYTHON_VERSION) \
          -DSPHINX_INTL_EXECUTABLE=/usr/bin/sphinx-build \
          ../src
}

function adao-build()
{
    local PREFIX=$1
    local TARGET=$2

    make -j$JOBS
}

function adao-install()
{
    local PREFIX=$1
    local TARGET=$2

    make install
}
