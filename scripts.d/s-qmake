# This plug-in only compiles qmake out of the Qt sources.
# There is no supported ways of doing just that, but we
# do as little as we can to avoid the long build of whole Qt
# build.

inherit-plugin s-qt

function s-qmake-depends()
{
    echo zlib1g-dev
}

function s-qmake-env()
{
    local PREFIX=$1
    local TARGET=$2

    add-to-var PATH $PREFIX/bin
}

function s-qmake-post-install()
{
    local PREFIX=$1
    local TARGET=$2

    for dir in qml translations phrasebooks doc plugins; do
        rm -fr $PREFIX/$dir
    done

    ls $PREFIX/bin/* | egrep -v '/qmake$' | xargs rm -f
}
