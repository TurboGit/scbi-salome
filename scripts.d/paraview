
function paraview-vcs() 
{ 
    echo default
    echo none 
    echo git 
    echo https://github.com/Kitware/ParaView.git 
} 


function paraview-patches()
{
    # Fix crash when starting paravis from SALOME GUI
    echo vtk-fix-thread-safe.patch
}

function paraview-ospray-deps
{
    echo ospray
}

function paraview-vrpn-deps
{
    echo vrpn
}

function paraview-gdal-deps
{
    echo libgdal-dev
}

function paraview-depends()
{
    local VARIANT=$1

    echo python3-dev
    echo libx11-dev
    echo libxt-dev

    echo qt
    echo openturns
    echo hdf5
    echo cmake

    # add all depends for variants if any

    for v in $(all-variants $VARIANT); do
        paraview-$v-deps
    done
}

function paraview-env()
{
    local PREFIX=$1
    local TARGET=$2

    add-to-var CMAKE_PREFIX_PATH \
	       $(last-modified-directory "$PREFIX/lib/cmake/paraview-*")

    add-to-var PARAVIEW_ROOT_DIR    $PREFIX
    add-to-var PARAVIEW_INSTALL_DIR $PREFIX
    add-to-var LD_LIBRARY_PATH      $PREFIX/lib
    add-to-var PATH                 $PREFIX/bin
    add-to-var PYTHONPATH           \
               $PREFIX/lib/python$PYTHON_VERSION/site-packages
}

function paraview-build-env()
{
    local PREFIX=$1
    local TARGET=$2

    built-compiler
}

function paraview-common-options()
{
    echo -DCMAKE_INSTALL_PREFIX=$PREFIX -DPARAVIEW_USE_OPENTURNS=ON \
         -DPARAVIEW_ENABLE_WEB=OFF -DVTK_PYTHON_VERSION=3 \
         -DPARAVIEW_QT_VERSION=5 -DPARAVIEW_BUILD_SHARED_LIBS:BOOL=ON \
         -DCMAKE_BUILD_TYPE:STRING=$(get-build-type CMAKE paraview Release) \
         -DPARAVIEW_INSTALL_DEVELOPMENT_FILES:BOOL=ON \
         -DVTK_USE_64BIT_IDS:BOOL=OFF -DPARAVIEW_BUILD_QT_GUI:BOOL=ON \
         -DPARAVIEW_ENABLE_PYTHON:BOOL=ON -DVTK_USE_SYSTEM_HDF5:BOOL=ON \
         -DVTK_USE_SYSTEM_PYGMENTS:BOOL=ON \
         -DPARAVIEW_BUILD_PLUGIN_Moments:BOOL=OFF \
         -DPARAVIEW_BUILD_PLUGIN_SierraPlotTools:BOOL=OFF \
         -DPARAVIEW_BUILD_PLUGIN_SLACTools:BOOL=OFF \
         -DPARAVIEW_INSTALL_DEVELOPMENT_FILES=ON -DVTK_NO_PYTHON_THREADS=OFF \
         -DPARAVIEW_ENABLE_CATALYST:BOOL=ON \
         -DPARAVIEW_BUILD_PLUGIN_AnalyzeNIfTIIO:BOOL=OFF \
         -DPARAVIEW_BUILD_PLUGIN_ArrowGlyph:BOOL=OFF \
         -DPARAVIEW_BUILD_PLUGIN_GMVReader:BOOL=OFF \
         -DPARAVIEW_BUILD_PLUGIN_NonOrthogonalSource:BOOL=OFF \
         -DPARAVIEW_BUILD_PLUGIN_PacMan:BOOL=OFF \
         -DPARAVIEW_BUILD_PLUGIN_StreamingParticles:BOOL=ON \
         -DPARAVIEW_ENABLE_MATPLOTLIB:BOOL=ON \
         -DPARAVIEW_BUILD_PLUGIN_EyeDomeLighting:BOOL=ON \
         -DPARAVIEW_BUILD_PLUGIN_SurfaceLIC:BOOL=ON \
         -DPARAVIEW_AUTOLOAD_PLUGIN_AcceleratedAlgorithms=ON \
         -DPARAVIEW_AUTOLOAD_PLUGIN_CDIReader=ON \
         -DPARAVIEW_AUTOLOAD_PLUGIN_DigitalRockPhysics=ON \
         -DPARAVIEW_AUTOLOAD_PLUGIN_EmbossingRepresentations=ON \
         -DPARAVIEW_AUTOLOAD_PLUGIN_GeodesicMeasurement=ON \
         -DPARAVIEW_AUTOLOAD_PLUGIN_LagrangianParticleTracker=ON \
         -DPARAVIEW_AUTOLOAD_PLUGIN_MooseXfemClip=ON \
         -DPARAVIEW_AUTOLOAD_PLUGIN_StreamLinesRepresentation=ON \
         -DPARAVIEW_AUTOLOAD_PLUGIN_ThickenLayeredCells=ON \
         -DPARAVIEW_AUTOLOAD_PLUGIN_VTKmFilters=ON \
         -DVTK_USE_SYSTEM_LIBXML2:BOOL=ON -DVTK_USE_OGGTHEORA_ENCODER:BOOL=ON \
         -DBUILD_EXAMPLES:BOOL=OFF \
         -DBUILD_TESTING:BOOL=OFF -DVTK_NO_PYTHON_THREADS=OFF \
         -DVTK_PYTHON_FULL_THREADSAFE=ON \
         -DVTK_BUILD_QT_DESIGNER_PLUGIN:BOOL=OFF \
         -DVTK_SMP_IMPLEMENTATION_TYPE=OpenMP \
         -DPARAVIEW_AUTOLOAD_PLUGIN_StreamingParticles=ON \
         -DPARAVIEW_AUTOLOAD_PLUGIN_EyeDomeLighting=ON \
         -DPARAVIEW_AUTOLOAD_PLUGIN_SurfaceLIC=ON \
         -DPARAVIEW_ENABLE_WEB:BOOL=OFF-DVTK_USE_SYSTEM_GL2PS:BOOL=ON \
         -DPARAVIEW_AUTOLOAD_PLUGIN_AcceleratedAlgorithms=ON \
         -DPARAVIEW_AUTOLOAD_PLUGIN_CDIReader=ON \
         -DPARAVIEW_AUTOLOAD_PLUGIN_DigitalRockPhysics=ON \
         -DPARAVIEW_AUTOLOAD_PLUGIN_EmbossingRepresentations=ON \
         -DPARAVIEW_AUTOLOAD_PLUGIN_GeodesicMeasurement=ON \
         -DPARAVIEW_AUTOLOAD_PLUGIN_LagrangianParticleTracker=ON \
         -DPARAVIEW_AUTOLOAD_PLUGIN_MooseXfemClip=ON \
         -DPARAVIEW_AUTOLOAD_PLUGIN_StreamLinesRepresentation=ON \
         -DPARAVIEW_AUTOLOAD_PLUGIN_ThickenLayeredCells=ON \
         -DPARAVIEW_AUTOLOAD_PLUGIN_VTKmFilters=ON \
         -DVTK_ALL_NEW_OBJECT_FACTORY=ON \
         \
         -DHDF5_C_COMPILER_EXECUTABLE=$HDF5_C_COMPILER_EXECUTABLE \
         -DHDF5_C_INCLUDE_DIR=$HDF5_C_INCLUDE_DIR \
         -DHDF5_hdf5_LIBRARY_RELEASE=$HDF5_C_LIBRARY_hdf5 \
         -DHDF5_hdf5_hl_LIBRARY_RELEASE=$HDF5_C_LIBRARY_hdf5_hl \
         -DHDF5_HL_LIBRARY=$HDF5_ROOT_DIR/lib/libhdf5_hl.so
}

function paraview-ospray-options()
{
    echo -DPARAVIEW_USE_RAYTRACING:BOOL=ON \
         -DOSPRAY_INSTALL_DIR=$OSPRAY_ROOT_DIR
}

function paraview-vrpn-options()
{
    echo -DPARAVIEW_USE_MPI:BOOL=ON \
         -DPARAVIEW_BUILD_PLUGIN_VRPlugin:BOOL=ON \
         -DPARAVIEW_USE_VRPN:BOOL=ON \
         -DVRPN_LIBRARY=$VRPN_ROOT_DIR/lib/libvrpn.a \
         -DVRPN_INCLUDE_DIR=$VRPN_ROOT_DIR/include
}

function paraview-gdal-options()
{
    echo -DPARAVIEW_ENABLE_GDAL:BOOL=ON
}

function paraview-config()
{
    local PREFIX=$1
    local TARGET=$2
    local VARIANT=$3
    local OPTIONS=$(paraview-common-options)

    # add options for all variants if any

    for v in $(all-variants $VARIANT); do
        OPTIONS="$OPTIONS $(paraview-$v-options)"
    done

    cmake $OPTIONS ../src
}

function paraview-build()
{
    local PREFIX=$1
    local TARGET=$2

    make -j$SCBI_JOBS
}

function paraview-install()
{
    local PREFIX=$1
    local TARGET=$2

    make install
}

function paraview-prefix()
{
    echo NONE
}
