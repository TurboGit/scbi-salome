
function s-cfd-study-vcs()
{
    echo default
    echo none
    echo git
    echo https://github.com/code-saturne/salome_cfd_extensions
}

function s-cfd-study-out-of-tree()
{
    echo false
}

function s-cfd-study-salome-module()
{
    echo CFDSTUDY
}

function s-cfd-study-ng-build-depends()
{
    echo s-salome-bin
}

function s-cfd-study-common-build-depends()
{
    echo s-cmake
    echo os@-autoconf
    echo os@-automake
    echo os@-autotools-dev
    echo os@-libtool
}

function s-cfd-study-default-build-depends()
{
    echo os@-python3-setuptools
}

function s-cfd-study-common-depends()
{
    echo s-saturne
}

function s-cfd-study-env()
{
    local PREFIX=$1
    local TARGET=$2

    set-var    CFDSTUDY_ROOT_DIR $PREFIX
    set-var    CFDSTUDY_DIR      $PREFIX

    add-to-var LD_LIBRARY_PATH   $PREFIX/lib
    add-to-var PATH              $PREFIX/bin/salome
    add-to-var PYTHONPATH        $PREFIX/bin/salome
    add-to-var PYTHONPATH        \
               $PREFIX/lib/python$PYTHON_VERSION/site-packages/salome

    add-to-var SALOME_MODULES    CFDSTUDY
    add-to-var SalomeAppConfig   $PREFIX/share/salome/resources/cfdstudy
}

function s-cfd-study-common-config-options()
{
    local PREFIX=$1
    local TARGET=$2
    local VARIANT=$3

    echo -DCMAKE_INSTALL_PREFIX=$PREFIX
    echo -DCMAKE_BUILD_TYPE=$(get-build-type CMAKE Release)
    echo -DSALOME_BUILD_DOC=OFF
}

function s-cfd-study-config()
{
    local PREFIX=$1
    local TARGET=$2
    local VARIANT=$3

    local OPTIONS=()
    get-config-options OPTIONS $PREFIX $TARGET $VARIANT

    cmake "${OPTIONS[@]}" ../src
}

function s-cfd-study-build()
{
    local PREFIX=$1
    local TARGET=$2

    make -j$SCBI_JOBS
}

function s-cfd-study-install()
{
    local PREFIX=$1
    local TARGET=$2

    make install
}

function s-cfd-study-post-install()
{
    local PREFIX=$1
    local TARGET=$2

    cp $PREFIX/share/salome/resources/cfdstudy/SalomeAppSL.xml \
       $PREFIX/share/salome/resources/cfdstudy/SalomeApp.xml
}
