
#  These are settings to use an installed SALOME binary (Windows or Linux)

[[ ! -f $SCBI_SALOME_BIN_ARCHIVE ]] &&
    echo SCBI_SALOME_BIN_ARCHIVE must be set and pointing to a SALOME tarball &&
    exit 1

[[ ! -f ${SCBI_SALOME_BIN_ARCHIVE}.md5 ]] &&
    echo SCBI_SALOME_BIN_ARCHIVE must have an md5 checksum file &&
    exit 1

####################################################### WINDOWS

function s-salome-bin-win-env()
{
    local IROOT=$SCBI_SALOME_BIN
    local IEXT=$IROOT/EXT

    add-to-var INCLUDE               $IEXT/include

    add-to-var HDF5_ROOT             $IEXT
    add-to-var HDF5_INCLUDE_DIRS     $IEXT/include
    add-to-var HDF5_LIBRARIES        $IEXT/lib/libhdf5.lib
    add-to-var HDF5_HL_LIBRARIES     $IEXT/lib/libhdf5_hl.lib

    add-to-var LIBXML2_INCLUDE_DIR   $IEXT/include
    add-to-var LIBXML2_LIBRARY       $IEXT/lib/libxml2.lib

    add-to-var Python3_INCLUDE_DIRS  $IROOT/Python/include
    add-to-var Python3_EXECUTABLE    $IROOT/Python/python3.exe
    add-to-var Python3_LIBRARIES     $IROOT/Python/python3.lib

    add-to-var FREETYPE_LIBRARY      $IEXT/lib/freetype.lib

    add-to-var ZLIB_LIBRARY          $IEXT/bin/zlib.lib

    add-to-var CGNS_LIBRARY          $IEXT/lib/cgns.lib

    add-to-var TBB_ROOT              $IEXT

    while read CMP; do
        add-to-var CMAKE_PREFIX_PATH "$CMP"
    done < <( find $IROOT -name "*onfig.cmake" -exec dirname {} \; | uniq )
}

####################################################### LINUX

function s-salome-bin-linux-depends()
{
    echo s-salome-tar
}

function s-salome-bin-linux-env()
{
    . ${SALOME_BIN_APPLICATION}/env_launch.sh

    #  Some missing settings in env_launch.sh

    add-to-var CMAKE_PREFIX_PATH  $KERNEL_ROOT_DIR/salome_adm/cmake_files
    add-to-var CMAKE_PREFIX_PATH  $GUI_ROOT_DIR/adm_local/cmake_files
    add-to-var CMAKE_PREFIX_PATH  $YACS_ROOT_DIR/adm/cmake
    add-to-var CMAKE_PREFIX_PATH  $OPENTURNS_ROOT_DIR/lib/cmake/openturns
    add-to-var CMAKE_PREFIX_PATH  $OPENTURNS_ROOT_DIR/lib/cmake/otmoris

    add-to-var C_INCLUDE_PATH     $PY2CPP_ROOT_DIR/include
    add-to-var CPLUS_INCLUDE_PATH $PY2CPP_ROOT_DIR/include
}
